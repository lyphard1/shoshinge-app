<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>正信偈アプリ main2（和讃切替付き）</title>
  <style>
    body {
      font-family: "Hiragino Mincho ProN", serif;
      margin: 0;
      padding: 20px;
      background: white;
    }

    #modeSelector {
      margin-bottom: 15px;
    }

    #modeSelector button {
      margin-right: 10px;
      padding: 5px 10px;
      font-size: 16px;
    }

    .page {
      writing-mode: vertical-rl;
      text-orientation: upright;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: space-evenly;
      height: 75vh;
      font-size: 24px;
      padding: 20px;
    }

    .page.active {
      display: flex;
    }

    #controls {
      margin-bottom: 10px;
    }

    #progressBarContainer {
      width: 100%;
      height: 10px;
      background: #ccc;
    }

    #progressBar {
      width: 0%;
      height: 100%;
      background: #4caf50;
    }

    .highlight {
      background: #ffeb3b;
    }
  </style>
</head>

<body>

  <h1>正信偈アプリ</h1>

  <div id="modeSelector">
    <button onclick="switchMode('shoshinge')">正信偈</button>
    <button onclick="switchMode('wasan')">和讃</button>
  </div>

  <div id="controls">
    <button id="playBtn">▶️ 再生</button>
    <button id="pauseBtn">⏸️ 一時停止</button>
    <div id="progressBarContainer">
      <div id="progressBar"></div>
    </div>
  </div>

  <audio id="audio" src="audio/shoshinge.mp3"></audio>

  <div id="pagesContainer">
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="21.9" data-start="7.1">帰命無量寿如来</div>
      <div class="verse" data-end="30.9" data-start="21.9">南無不可思議光</div>
      <div class="verse" data-end="38.7" data-start="30.9">法蔵菩薩因位時</div>
      <div class="verse" data-end="46.0" data-start="38.7">在世自在王仏所</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="53.0" data-start="46.0">覩見諸仏浄土因</div>
      <div class="verse" data-end="59.9" data-start="53.0">国土人天之善悪</div>
      <div class="verse" data-end="66.9" data-start="59.9">建立無上殊勝願</div>
      <div class="verse" data-end="73.4" data-start="66.9">超発希有大弘誓</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="80.1" data-start="73.4">五劫思惟之摂受</div>
      <div class="verse" data-end="86.9" data-start="80.1">重誓名声聞十方</div>
      <div class="verse" data-end="93.7" data-start="86.9">普放無量無辺光</div>
      <div class="verse" data-end="100.4" data-start="93.7">無碍無対光炎王</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="107.0" data-start="100.4">清浄歓喜智慧光</div>
      <div class="verse" data-end="113.7" data-start="107.0">不断難思無称光</div>
      <div class="verse" data-end="120.2" data-start="113.7">超日月光照塵刹</div>
      <div class="verse" data-end="126.8" data-start="120.2">一切群生蒙光照</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="133.3" data-start="126.8">本願名号正定業</div>
      <div class="verse" data-end="140.0" data-start="133.3">至心信楽願為因</div>
      <div class="verse" data-end="146.5" data-start="140.0">成等覚証大涅槃</div>
      <div class="verse" data-end="153.0" data-start="146.5">必至滅度願成就</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="159.3" data-start="153.0">如来所以興出世</div>
      <div class="verse" data-end="165.9" data-start="159.3">唯説弥陀本願海</div>
      <div class="verse" data-end="172.3" data-start="165.9">五濁悪時群生海</div>
      <div class="verse" data-end="178.7" data-start="172.3">応信如来如実言</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="185.0" data-start="178.7">能発一念喜愛心</div>
      <div class="verse" data-end="191.4" data-start="185.0">不断煩悩得涅槃</div>
      <div class="verse" data-end="197.7" data-start="191.4">凡聖逆謗斉廻入</div>
      <div class="verse" data-end="204.2" data-start="197.7">如衆水入海一味</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="210.6" data-start="204.2">摂取心光常照護</div>
      <div class="verse" data-end="217.1" data-start="210.6">已能雖破無明闇</div>
      <div class="verse" data-end="223.5" data-start="217.1">貪愛瞋憎之雲霧</div>
      <div class="verse" data-end="229.7" data-start="223.5">常覆真実信心天</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="236.0" data-start="229.7">譬如日光覆雲霧</div>
      <div class="verse" data-end="242.7" data-start="236.0">雲霧之下明無闇</div>
      <div class="verse" data-end="248.7" data-start="242.7">獲信見敬大慶喜</div>
      <div class="verse" data-end="254.9" data-start="248.7">即横超截五悪趣</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="261.1" data-start="254.9">一切善悪凡夫人</div>
      <div class="verse" data-end="267.4" data-start="261.1">聞信如来弘誓願</div>
      <div class="verse" data-end="273.7" data-start="267.4">仏言広大勝解者</div>
      <div class="verse" data-end="279.9" data-start="273.7">是人名分陀利華</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="285.9" data-start="279.9">弥陀仏本願念仏</div>
      <div class="verse" data-end="292.1" data-start="285.9">邪見驕慢悪衆生</div>
      <div class="verse" data-end="298.3" data-start="292.1">信楽受持甚以難</div>
      <div class="verse" data-end="304.4" data-start="298.3">難中之難無過斯</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="310.6" data-start="304.4">印度西天之論家</div>
      <div class="verse" data-end="319.8" data-start="310.6">中夏日域之高僧</div>
      <div class="verse" data-end="325.8" data-start="319.8">顕大聖興世正意</div>
      <div class="verse" data-end="331.9" data-start="325.8">明如来本誓応機</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="338.1" data-start="331.9">釈迦如来楞伽山</div>
      <div class="verse" data-end="347.2" data-start="338.1">為衆告命南天竺</div>
      <div class="verse" data-end="353.3" data-start="347.2">龍樹大士出於世</div>
      <div class="verse" data-end="359.3" data-start="353.3">悉能摧破有無見</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="365.3" data-start="359.3">宣説大乗無上法</div>
      <div class="verse" data-end="371.3" data-start="365.3">証歓喜地生安楽</div>
      <div class="verse" data-end="377.3" data-start="371.3">顕示難行陸路苦</div>
      <div class="verse" data-end="383.4" data-start="377.3">信楽易行水道楽</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="389.5" data-start="383.4">憶念弥陀仏本願</div>
      <div class="verse" data-end="398.6" data-start="389.5">自然即時入必定</div>
      <div class="verse" data-end="404.7" data-start="398.6">唯能常称如来号</div>
      <div class="verse" data-end="410.7" data-start="404.7">応報大悲弘誓恩</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="416.7" data-start="410.7">天親菩薩造論説</div>
      <div class="verse" data-end="422.9" data-start="416.7">帰命無碍光如来</div>
      <div class="verse" data-end="429.0" data-start="422.9">依修多羅顕真実</div>
      <div class="verse" data-end="434.9" data-start="429.0">光闡横超大誓願</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="440.8" data-start="434.9">広由本願力回向</div>
      <div class="verse" data-end="447.1" data-start="440.8">為度群生彰一心</div>
      <div class="verse" data-end="453.1" data-start="447.1">帰入功徳大宝海</div>
      <div class="verse" data-end="459.2" data-start="453.1">必獲入大会衆数</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="465.2" data-start="459.2">得至蓮華蔵世界</div>
      <div class="verse" data-end="471.2" data-start="465.2">即証真如法性身</div>
      <div class="verse" data-end="477.2" data-start="471.2">遊煩悩林現神通</div>
      <div class="verse" data-end="483.1" data-start="477.2">入生死園示応化</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="489.1" data-start="483.1">本師曇鸞梁天子</div>
      <div class="verse" data-end="495.3" data-start="489.1">常向鸞処菩薩礼</div>
      <div class="verse" data-end="501.3" data-start="495.3">三蔵流支授浄教</div>
      <div class="verse" data-end="507.2" data-start="501.3">焚焼仙経帰楽邦</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="513.2" data-start="507.2">天親菩薩論註解</div>
      <div class="verse" data-end="519.2" data-start="513.2">報土因果顕誓願</div>
      <div class="verse" data-end="525.1" data-start="519.2">往還回向由他力</div>
      <div class="verse" data-end="531.1" data-start="525.1">正定之因唯信心</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="537.1" data-start="531.1">惑染凡夫信心発</div>
      <div class="verse" data-end="543.2" data-start="537.1">証知生死即涅槃</div>
      <div class="verse" data-end="549.3" data-start="543.2">必至無量光明土</div>
      <div class="verse" data-end="555.3" data-start="549.3">諸有衆生皆普化</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="561.3" data-start="555.3">道綽決聖道難証</div>
      <div class="verse" data-end="567.5" data-start="561.3">唯明浄土可通入</div>
      <div class="verse" data-end="573.6" data-start="567.5">万善自力貶勤修</div>
      <div class="verse" data-end="579.5" data-start="573.6">円満徳号勧専称</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="585.3" data-start="579.5">三不三信誨慇懃</div>
      <div class="verse" data-end="591.5" data-start="585.3">像末法滅同悲引</div>
      <div class="verse" data-end="597.8" data-start="591.5">一生造悪値弘誓</div>
      <div class="verse" data-end="612.5" data-start="597.8">至安養界証妙果</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="628.3" data-start="612.5">善導独明仏正意</div>
      <div class="verse" data-end="637.4" data-start="628.3">矜哀定散与逆悪</div>
      <div class="verse" data-end="645.5" data-start="637.4">光明名号顕因縁</div>
      <div class="verse" data-end="652.7" data-start="645.5">開入本願大智海</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="659.6" data-start="652.7">行者正受金剛心</div>
      <div class="verse" data-end="666.4" data-start="659.6">慶喜一念相応後</div>
      <div class="verse" data-end="673.1" data-start="666.4">与韋提等獲三忍</div>
      <div class="verse" data-end="679.9" data-start="673.1">即証法性之常楽</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="686.5" data-start="679.9">源信広開一代教</div>
      <div class="verse" data-end="693.2" data-start="686.5">偏帰安養勧一切</div>
      <div class="verse" data-end="699.8" data-start="693.2">専雑執心判浅深</div>
      <div class="verse" data-end="706.4" data-start="699.8">報化二土正弁立</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="12" data-start="3.9">南無阿弥陀仏</div>
      <div class="verse" data-end="21.4" data-start="12">南無阿弥陀仏</div>
      <div class="verse" data-end="29.7" data-start="21.4">南無阿弥陀仏</div>
      <div class="verse" data-end="37.7" data-start="29.7">南無阿弥陀仏</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="45.9" data-start="37.7">南無阿弥陀仏</div>
      <div class="verse" data-end="54.3" data-start="45.9">南無阿弥陀仏</div>
      <div class="verse" data-end="56.8" data-start="54.3">南</div>
      <div class="verse" data-end="75.6" data-start="56.8">彌陀成佛のこのかたは</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="92" data-start="75.6">いまに十劫をへたまへり</div>
      <div class="verse" data-end="102.3" data-start="92">法身の光輪きはもなく</div>
      <div class="verse" data-end="121.4" data-start="108.7">世の盲冥をてらすなり</div>
      <div class="verse" data-end="129.5" data-start="121.5">南無阿弥陀仏</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="137.2" data-start="129.5">南無阿弥陀仏</div>
      <div class="verse" data-end="145.2" data-start="137.2">南無阿弥陀仏</div>
      <div class="verse" data-end="153.4" data-start="145.2">南無阿弥陀仏</div>
      <div class="verse" data-end="155.9" data-start="153.4">南</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="173.7" data-start="155.9">智慧の光明はかりなし</div>
      <div class="verse" data-end="187.8" data-start="173.7">有量の諸相ことごとく</div>
      <div class="verse" data-end="203.2" data-start="187.8">光暁かぶらぬものはなし</div>
      <div class="verse" data-end="215.5" data-start="203.2">眞實明に帰命せよ</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="223.3" data-start="215.5">南無阿弥陀仏</div>
      <div class="verse" data-end="231.3" data-start="223.3">南無阿弥陀仏</div>
      <div class="verse" data-end="239" data-start="231.3">南無阿弥陀仏</div>
      <div class="verse" data-end="246.7" data-start="239">南無</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="256.7" data-start="246.7">阿弥陀仏</div>
      <div class="verse" data-end="264.5" data-start="256.7">南無阿弥陀仏</div>
      <div class="verse" data-end="272" data-start="264.5">南無阿弥陀仏</div>
      <div class="verse" data-end="280.4" data-start="272">南無阿弥陀仏</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="287.6" data-start="280.4">南無阿弥陀仏</div>
      <div class="verse" data-end="295" data-start="287.6">南無阿弥陀仏</div>
      <div class="verse" data-end="302.6" data-start="295">南無阿弥陀仏</div>
      <div class="verse" data-end="305.2" data-start="302.6">南</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="326.5" data-start="305.2">解脱の光輪きはもなし</div>
      <div class="verse" data-end="340.2" data-start="326.5">光触かぶるものはみな</div>
      <div class="verse" data-end="353.2" data-start="340.2">有無をはなるとのべたまふ</div>
      <div class="verse" data-end="365.5" data-start="353.2">平等覚に帰命せよ</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="372.9" data-start="365.5">南無阿弥陀仏</div>
      <div class="verse" data-end="380.9" data-start="372.9">南無阿弥陀仏</div>
      <div class="verse" data-end="387.9" data-start="380.9">南無阿弥陀仏</div>
      <div class="verse" data-end="395.2" data-start="387.9">南無阿弥陀仏</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="398.1" data-start="395.2">南</div>
      <div class="verse" data-end="418.2" data-start="398.1">光雲無碍如虚空</div>
      <div class="verse" data-end="427.4" data-start="418.2">一切の有碍にさはりなし</div>
      <div class="verse" data-end="445.3" data-start="427.8">光沢かふらぬものぞなき</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="457.3" data-start="445.4">難思議を帰命せよ</div>
      <div class="verse" data-end="464.8" data-start="457.3">南無阿弥陀仏</div>
      <div class="verse" data-end="471.8" data-start="464.8">南無阿弥陀仏</div>
      <div class="verse" data-end="483.2" data-start="471.8">南無阿弥陀仏</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="495.4" data-start="483.2">南無阿弥陀仏</div>
      <div class="verse" data-end="504.3" data-start="495.4">南無阿弥陀仏</div>
      <div class="verse" data-end="512.3" data-start="504.3">南無阿弥陀仏</div>
      <div class="verse" data-end="520.6" data-start="512.3">南無阿弥陀仏</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="528.5" data-start="520.6">南無阿弥陀仏</div>
      <div class="verse" data-end="536.1" data-start="528.5">南無阿弥陀仏</div>
      <div class="verse" data-end="544.3" data-start="536.1">南無阿弥陀仏</div>
      <div class="verse" data-end="546.5" data-start="544.3">南</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="567.6" data-start="546.5">清浄光明ならびなし</div>
      <div class="verse" data-end="581.4" data-start="567.6">遇斯光のゆへなれば</div>
      <div class="verse" data-end="597.3" data-start="581.4">一切の業繋ものぞこりぬ</div>
      <div class="verse" data-end="610" data-start="597.3">畢竟依を帰命せよ</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="617.7" data-start="610">南無阿弥陀仏</div>
      <div class="verse" data-end="625.5" data-start="617.7">南無阿弥陀仏</div>
      <div class="verse" data-end="633.2" data-start="625.5">南無阿弥陀仏</div>
      <div class="verse" data-end="641.4" data-start="633.2">南無阿弥陀仏</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="643.7" data-start="641.4">南</div>
      <div class="verse" data-end="660.5" data-start="643.7">佛光照曜最第一</div>
      <div class="verse" data-end="676.2" data-start="660.5">光炎王仏となづけたり</div>
      <div class="verse" data-end="690.2" data-start="676.2">三塗の黒闇ひらくなり</div>
    </div>
    <div class="page" data-section="shoshinge">
      <div class="verse" data-end="703.4" data-start="690.2">大応供を帰命せよ</div>
    </div>
    <div class="page" data-section="wasan">
      <div class="verse" data-end="712.9" data-start="706.4">極重悪人唯称仏</div>
      <div class="verse" data-end="719.4" data-start="712.9">我亦在彼摂取中</div>
      <div class="verse" data-end="725.8" data-start="719.4">煩悩障眼雖不見</div>
      <div class="verse" data-end="732.2" data-start="725.8">大悲無倦常照我</div>
    </div>
    <div class="page" data-section="wasan">
      <div class="verse" data-end="738.7" data-start="732.2">本師源空明仏教</div>
      <div class="verse" data-end="745.1" data-start="738.7">憐愍善悪凡夫人</div>
      <div class="verse" data-end="751.7" data-start="745.1">真宗教証興片州</div>
      <div class="verse" data-end="757.9" data-start="751.7">選択本願弘悪世</div>
    </div>
    <div class="page" data-section="wasan">
      <div class="verse" data-end="764.3" data-start="757.9">還来生死輪転家</div>
      <div class="verse" data-end="770.9" data-start="764.3">決以疑情為所止</div>
      <div class="verse" data-end="777.3" data-start="770.9">速入寂静無為楽</div>
      <div class="verse" data-end="784.8" data-start="777.3">必以信心為能入</div>
    </div>
    <div class="page" data-section="wasan">
      <div class="verse" data-end="796.5" data-start="784.8">弘経大士宗師等</div>
      <div class="verse" data-end="809.2" data-start="797.3">拯済無辺極濁悪</div>
      <div class="verse" data-end="821.1" data-start="809.2">道俗時衆共同心</div>
      <div class="verse" data-end="827.0" data-start="821.1">唯可信斯高僧説</div>
    </div>
    <div class="page" data-section="wasan">
      <div class="verse" data-end="722.8" data-start="704.4">願以此功徳</div>
      <div class="verse" data-end="733.5" data-start="722.8">平等施一切</div>
      <div class="verse" data-end="743.9" data-start="733.5">同発菩提心</div>
      <div class="verse" data-end="755.0" data-start="743.9">往生安楽国</div>
    </div>
  </div>

  <script>
    const audio = document.getElementById('audio');
    const playBtn = document.getElementById('playBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const progressBar = document.getElementById('progressBar');
    const pages = document.querySelectorAll('.page');
    let currentMode = 'shoshinge';

    function switchMode(mode) {
      currentMode = mode;
      pages.forEach((p, idx) => {
        if (p.dataset.section === mode && idx === 0) {
          p.classList.add('active');
        }
        p.classList.remove('active');
        if (p.dataset.section === mode) {
          p.classList.add('active');
        }
      });
    }

    function highlightVerse(currentTime) {
      const allVerses = document.querySelectorAll('.verse');
      allVerses.forEach(v => v.classList.remove('highlight'));

      const verses = document.querySelectorAll(`.page[data-section="${currentMode}"] .verse`);
      verses.forEach(v => {
        const start = parseFloat(v.dataset.start);
        const end = parseFloat(v.dataset.end);
        if (currentTime >= start && currentTime < end) {
          v.classList.add('highlight');
          v.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      });
    }
    const verses = document.querySelectorAll(`.page[data-section="${currentMode}"] .verse`);
    verses.forEach(v => {
      const start = parseFloat(v.dataset.start);
      const end = parseFloat(v.dataset.end);
      if (currentTime >= start && currentTime < end) {
        v.classList.add('highlight');
        v.scrollIntoView({ behavior: 'smooth', block: 'center' });
      } else {
        v.classList.remove('highlight');
      }
    });
}

    playBtn.addEventListener('click', () => audio.play());
    pauseBtn.addEventListener('click', () => audio.pause());

    audio.addEventListener('timeupdate', () => {
      highlightVerse(audio.currentTime);
      updateActivePage();
      const percent = (audio.currentTime / audio.duration) * 100;
      progressBar.style.width = percent + '%';
    });


    function updateActivePage() {
      const activeVerses = document.querySelectorAll(`.page[data-section="${currentMode}"] .verse.highlight`);
      pages.forEach((p, idx) => {
        if (p.dataset.section === mode && idx === 0) {
          p.classList.add('active');
        }
        if (p.dataset.section === currentMode) {
          const containsActive = [...p.querySelectorAll('.verse')].some(v => v.classList.contains('highlight'));
          p.classList.toggle('active', containsActive);
        } else {
          p.classList.remove('active');
        }
      });
    }

    switchMode('shoshinge');
  </script>

</body>

</html>